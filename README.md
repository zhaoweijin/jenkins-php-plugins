# Required Jenkins Plugins
You need to install the following plugins for Jenkins:

* [**Checkstyle**](https://wiki.jenkins-ci.org/display/JENKINS/Checkstyle+Plugin) (for processing PHP_CodeSniffer logfiles in Checkstyle format)

* [**Clover PHP**](https://wiki.jenkins-ci.org/display/JENKINS/Clover+PHP+Plugin) (for processing PHPUnit's Clover XML logfile)

* [**Crap4J**](http://wiki.jenkins-ci.org/display/JENKINS/Crap4J+Plugin) (for processing PHPUnit's Crap4J XML logfile)

* [**DRY**](https://wiki.jenkins-ci.org/display/JENKINS/DRY+Plugin) (for processing phpcpd logfiles in PMD-CPD format)

* [**HTML Publisher**](https://wiki.jenkins-ci.org/display/JENKINS/HTML+Publisher+Plugin) (for publishing documentation generated by phpDox, for instance)

* [**JDepend**](https://wiki.jenkins-ci.org/display/JENKINS/JDepend+Plugin) (for processing PHP_Depend logfiles in JDepend format)

* [**Plot**](https://wiki.jenkins-ci.org/display/JENKINS/Plot+Plugin) (for processing phploc CSV output)

* [**PMD**](https://wiki.jenkins-ci.org/display/JENKINS/PMD+Plugin) (for processing PHPMD logfiles in PMD format)

* [**Violations**](https://wiki.jenkins-ci.org/display/JENKINS/Violations) (for processing various logfiles)

* [**Warnings**](https://wiki.jenkins-ci.org/display/JENKINS/Warnings+Plugin) (for processing PHP compiler warnings in the console log)

* [**xUnit**](https://wiki.jenkins-ci.org/display/JENKINS/xUnit+Plugin) (for processing PHPUnit's JUnit XML logfile)

You can install these plugins using the web frontend at

`http://localhost:8080/pluginManager/available`


#### or using the `Jenkins CLI`:

	wget http://localhost:8080/jnlpJars/jenkins-cli.jar
	
	java -jar jenkins-cli.jar -s http://localhost:8080 install-plugin checkstyle cloverphp crap4j dry htmlpublisher jdepend plot pmd violations warnings xunit
	
	java -jar jenkins-cli.jar -s http://localhost:8080 safe-restart


#### If you see an error message such as "checkstyle is neither a valid file, URL, nor a plugin artifact name in the update center No update center data is retrieved yet", you need to update your plugin list manually:

    curl -L http://updates.jenkins-ci.org/update-center.json | sed '1d;$d' | curl -X POST -H 'Accept: application/json' -d @- http://localhost:8080/updateCenter/byId/default/postBack
    
In the above, replace `localhost:8080` with the hostname and port of your Jenkins installation.

# Integration

1. ##### Fetch the jenkins-cli.jar from your jenkins server:

		wget http://localhost:8080/jnlpJars/jenkins-cli.jar

2. ##### Download and install the job template:

		curl -L https://raw.githubusercontent.com/sebastianbergmann/php-jenkins-template/master/config.xml | \
     java -jar jenkins-cli.jar -s http://localhost:8080 create-job php-template

	##### 	or add the template manually:

		cd $JENKINS_HOME/jobs
		mkdir php-template
		cd php-template
		wget https://raw.github.com/sebastianbergmann/php-jenkins-template/master/config.xml
		cd ..
		chown -R jenkins:jenkins php-template/

3. ##### Reload Jenkins' configuration, for instance using the Jenkins CLI:

		java -jar jenkins-cli.jar -s http://localhost:8080 reload-configuration

4. ##### Click on "New Job".
5. ##### Click on "New Job".
6. ##### Enter a "Job name".
7. ##### Select "Copy existing job" and enter "php-template" into the "Copy from" field.
8. ##### Click "OK".
9. ##### Uncheck the "Disable Build" option.
10. ##### Fill in your "Source Code Management" information.
11. ##### Configure a "Build Trigger", for instance "Poll SCM".
12. ##### Click "Save".
